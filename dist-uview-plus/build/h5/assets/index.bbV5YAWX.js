import{j as t,m as y,k as v,o as d,c as p,w as l,b as k,t as w,s as S,q as h,p as $,e as I,r as f,l as _,a as n,x as B,F as D,n as m,f as x,W as A,d as P,X as H,Q as V,a2 as T,u as C,U as z}from"./index.1709808519763.js";import{_ as M}from"./u-icon.D72PoPKk.js";import{_ as g}from"./plugin-vueexport-helper.DlAUqK2U.js";const F={props:{isDot:{type:Boolean,default:t.badge.isDot},value:{type:[Number,String],default:t.badge.value},modelValue:{type:[Number,String],default:t.badge.modelValue},show:{type:Boolean,default:t.badge.show},max:{type:[Number,String],default:t.badge.max},type:{type:String,default:t.badge.type},showZero:{type:Boolean,default:t.badge.showZero},bgColor:{type:[String,null],default:t.badge.bgColor},color:{type:[String,null],default:t.badge.color},shape:{type:String,default:t.badge.shape},numberType:{type:String,default:t.badge.numberType},offset:{type:Array,default:t.badge.offset},inverted:{type:Boolean,default:t.badge.inverted},absolute:{type:Boolean,default:t.badge.absolute}}},E={name:"u-badge",mixins:[y,F,v],computed:{boxStyle(){return{}},badgeStyle(){const e={};if(this.color&&(e.color=this.color),this.bgColor&&!this.inverted&&(e.backgroundColor=this.bgColor),this.absolute&&(e.position="absolute",this.offset.length)){const s=this.offset[0],c=this.offset[1]||s;e.top=uni.$u.addUnit(s),e.right=uni.$u.addUnit(c)}return e},showValue(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}}}};function O(e,s,c,b,a,i){const o=I;return e.show&&(Number(e.value)!==0||e.showZero||e.isDot)?(d(),p(o,{key:0,class:S([[e.isDot?"u-badge--dot":"u-badge--not-dot",e.inverted&&"u-badge--inverted",e.shape==="horn"&&"u-badge--horn",`u-badge--${e.type}${e.inverted?"--inverted":""}`],"u-badge"]),style:h([e.$u.addStyle(e.customStyle),i.badgeStyle])},{default:l(()=>[k(w(e.isDot?"":i.showValue),1)]),_:1},8,["class","style"])):$("",!0)}const U=g(E,[["render",O],["__scopeId","data-v-091d7580"]]),Z={props:{name:{type:[String,Number,null],default:t.tabbarItem.name},icon:{icon:String,default:t.tabbarItem.icon},badge:{type:[String,Number,null],default:t.tabbarItem.badge},dot:{type:Boolean,default:t.tabbarItem.dot},text:{type:String,default:t.tabbarItem.text},badgeStyle:{type:[Object,String],default:t.tabbarItem.badgeStyle}}},j={name:"u-tabbar-item",mixins:[y,v,Z],data(){return{isActive:!1,parentData:{value:null,activeColor:"",inactiveColor:""}}},options:{virtualHost:!0},created(){this.init()},emits:["click","change"],methods:{init(){this.updateParentData(),this.parent||uni.$u.error("u-tabbar-item必须搭配u-tabbar组件使用");const e=this.parent.children.indexOf(this);this.isActive=(this.name||e)===this.parentData.value},updateParentData(){this.getParentData("u-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick(()=>{const e=this.parent.children.indexOf(this),s=this.name||e;s!==this.parent.value&&this.parent.$emit("change",s),this.$emit("click",s)})}}};function R(e,s,c,b,a,i){const o=f(_("u-icon"),M),r=f(_("u-badge"),U),u=x,N=I;return d(),p(u,{class:"u-tabbar-item",style:h([e.$u.addStyle(e.customStyle)]),onClick:i.clickHandler},{default:l(()=>[n(u,{class:"u-tabbar-item__icon"},{default:l(()=>[e.icon?(d(),p(o,{key:0,name:e.icon,color:a.isActive?a.parentData.activeColor:a.parentData.inactiveColor,size:20},null,8,["name","color"])):(d(),B(D,{key:1},[a.isActive?m(e.$slots,"active-icon",{key:0},void 0,!0):m(e.$slots,"inactive-icon",{key:1},void 0,!0)],64)),n(r,{absolute:"",offset:[0,e.dot?"34rpx":e.badge>9?"14rpx":"20rpx"],customStyle:e.badgeStyle,isDot:e.dot,value:e.badge||(e.dot?1:null),show:e.dot||e.badge>0},null,8,["offset","customStyle","isDot","value","show"])]),_:3}),m(e.$slots,"text",{},()=>[n(N,{class:"u-tabbar-item__text",style:h({color:a.isActive?a.parentData.activeColor:a.parentData.inactiveColor})},{default:l(()=>[k(w(e.text),1)]),_:1},8,["style"])],!0)]),_:3},8,["style","onClick"])}const q=g(j,[["render",R],["__scopeId","data-v-be9c3bac"]]),G={props:{}},L={name:"u-safe-bottom",mixins:[y,v,G],data(){return{safeAreaBottomHeight:0,isNvue:!1}},computed:{style(){const e={};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},mounted(){}};function Q(e,s,c,b,a,i){const o=x;return d(),p(o,{class:S(["u-safe-bottom",[!a.isNvue&&"u-safe-area-inset-bottom"]]),style:h([i.style])},null,8,["style","class"])}const W=g(L,[["render",Q],["__scopeId","data-v-b9e2765a"]]),X={props:{value:{type:[String,Number,null],default:t.tabbar.value},safeAreaInsetBottom:{type:Boolean,default:t.tabbar.safeAreaInsetBottom},border:{type:Boolean,default:t.tabbar.border},zIndex:{type:[String,Number],default:t.tabbar.zIndex},activeColor:{type:String,default:t.tabbar.activeColor},inactiveColor:{type:String,default:t.tabbar.inactiveColor},fixed:{type:Boolean,default:t.tabbar.fixed},placeholder:{type:Boolean,default:t.tabbar.placeholder}}},J={name:"u-tabbar",mixins:[y,v,X],data(){return{placeholderHeight:0}},computed:{tabbarStyle(){const e={zIndex:this.zIndex};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map(e=>e.updateFromParent())},async setPlaceholderHeight(){!this.fixed||!this.placeholder||(await uni.$u.sleep(20),this.$uGetRect(".u-tabbar__content").then(({height:e=50})=>{this.placeholderHeight=e}))}}};function K(e,s,c,b,a,i){const o=x,r=f(_("u-safe-bottom"),W);return d(),p(o,{class:"u-tabbar"},{default:l(()=>[n(o,{class:S(["u-tabbar__content",[e.border&&"u-border-top",e.fixed&&"u-tabbar--fixed"]]),ref:"u-tabbar__content",onTouchmove:A(e.noop,["stop","prevent"]),style:h([i.tabbarStyle])},{default:l(()=>[n(o,{class:"u-tabbar__content__item-wrapper"},{default:l(()=>[m(e.$slots,"default",{},void 0,!0)]),_:3}),e.safeAreaInsetBottom?(d(),p(r,{key:0})):$("",!0)]),_:3},8,["onTouchmove","class","style"]),e.placeholder?(d(),p(o,{key:0,class:"u-tabbar__placeholder",style:h({height:a.placeholderHeight+"px"})},null,8,["style"])):$("",!0)]),_:3})}const Y=g(J,[["render",K],["__scopeId","data-v-3e666e38"]]),ee=P({__name:"index",setup(e){const s=H(),c=V({barValue:""});console.log("AppProvider:",uni.$u,s);const b=(()=>{const a=T([{icon:"/static/tabbar/icon_index_default.png",selectIcon:"/static/tabbar/icon_index_selected.png",path:"/pages/index/index",position:"other",text:"tab1",keep:!1,hidden:!1,index:0},{icon:"/static/tabbar/icon_group_default.png",selectIcon:"/static/tabbar/icon_group_selected.png",path:"/pages/buy/index",position:"other",text:"tab2",keep:!1,hidden:!1,index:1},{icon:"/static/tabbar/icon_publish.png",selectIcon:"",path:"/pages/sell/index",position:"center",text:"",keep:!1,hidden:!1,index:2},{icon:"/static/tabbar/icon_template_default.png",selectIcon:"/static/tabbar/icon_template_selected.png",path:"/pages/message/index",position:"other",text:"tab4",keep:!1,hidden:!1,index:3},{icon:"/static/tabbar/icon_user_default.png",selectIcon:"/static/tabbar/icon_user_selected.png",path:"/pages/my/index",position:"other",text:"tab5",keep:!1,hidden:!1,index:4}]);return{tabbarList:a,tabbarChange:r=>{const u=a[r];z({url:u.path})},tabbarActive:()=>{const r=a.findIndex(u=>s.path==u.path);r>-1&&(c.barValue=r)}}})();return b.tabbarActive(),(a,i)=>{const o=f(_("u-tabbar-item"),q),r=f(_("u-tabbar"),Y),u=x;return d(),p(u,{class:"page"},{default:l(()=>[m(a.$slots,"default",{},void 0,!0),n(u,{class:"my-tab-bar"},{default:l(()=>[n(r,{class:"",value:C(c).barValue,activeColor:"#d81e06",placeholder:!1,onChange:C(b).tabbarChange,fixed:!0,safeAreaInsetBottom:!0},{default:l(()=>[n(o,{text:"首页",icon:"home",dot:"",class:"_u_text-首页 _u_dot"}),n(o,{text:"买号",icon:"photo",badge:"3",class:"_u_text-买号"}),n(o,{text:"卖号",icon:"play-right",class:"_u_text-卖号"}),n(o,{text:"消息",icon:"play-right",class:"_u_text-消息"}),n(o,{text:"我的",icon:"account",class:"_u_text-我的"})]),_:1},8,["value","onChange"])]),_:1})]),_:3})}}}),se=g(ee,[["__scopeId","data-v-5a97f888"]]);export{se as A,U as _};
