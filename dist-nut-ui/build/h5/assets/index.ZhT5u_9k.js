import{A as f,C as me,k as Ve,d as q,c as d,p as re,a1 as ze,o as w,a as V,w as C,g as F,e as z,b as J,h as ue,F as ce,q as Re,s as Q,u as D,f as P,i as pe,a2 as Be,j as Fe,t as He,x as Ge,v as Le}from"./index.1709636774746.js";import{N as Me}from"./icon.sT-AJalv.js";import{c as he,m as H,a as U,t as xe,h as Ue,d as ve,P as Z,T as fe,g as _e,b as je}from"./prefix.CG6Gj_JG.js";import{u as qe,b as We,a as Oe}from"./useTouch.LXYfAfrU.js";import{u as Xe}from"./useProvide.BZkzDDf8.js";import{p as Ye}from"./pxCheck.f4SXeRzl.js";import{C as ee,a as be,U as ge}from"./event.DRiCrrdg.js";import{_ as ye}from"./plugin-vueexport-helper.DlAUqK2U.js";import{u as Qe}from"./useInject.BCFRtg7A.js";const j=window;function Je(){return typeof j<"u"?j.requestAnimationFrame||j.webkitRequestAnimationFrame||function(s){j.setTimeout(s,1e3/60)}:function(s){setTimeout(s,1e3/60)}}const de=Je(),Te=Symbol("tabs"),Ze={...he,modelValue:H(0),customColor:String,direction:U("horizontal"),size:U("normal"),type:U("line"),titleScroll:Boolean,ellipsis:xe,swipeable:Boolean,autoHeight:Boolean,background:String,animatedTime:H(300),titleGutter:H(0),align:U("center")},et={[ee]:s=>s instanceof Object,[be]:s=>s instanceof Object,[ge]:s=>Ue(s)};class tt{constructor(){this.title="",this.paneKey="",this.disabled=!1}}function at(s,m,t,k){const y=f(),T=`tabsContentRef-${ve()}`,g=f({width:0,height:0}),I=async()=>{var i,E;if(t){const o=await k(T,t);g.value.width=o.width||0,g.value.height=o.height||0}else g.value.width=((i=y.value)==null?void 0:i.clientWidth)||0,g.value.height=((E=y.value)==null?void 0:E.clientHeight)||0};me(()=>{setTimeout(()=>{I()},100)});const p=Ve({offset:0,moving:!1}),v=qe();let r="";const G=(i,E)=>{var L;let o=i;switch(s.direction==="horizontal"?(r=i>0?"right":"left",o=Math.abs(o)/g.value.width*100):(r=E>0?"bottom":"top",o=E,o=Math.abs(o)/((L=g.value)==null?void 0:L.height)*100),o>85&&(o=85),r){case"left":case"top":m.isEnd()&&(o=0,p.moving=!1);break;case"right":case"bottom":o=-o,m.isBegin()&&(o=0,p.moving=!1);break}p.offset=o};return{touchMethods:{onTouchStart(i){s.swipeable&&v.start(i)},onTouchMove(i){s.swipeable&&(v.move(i),p.moving=!0,G(v.deltaX.value,v.deltaY.value),s.direction==="horizontal"&&v.isHorizontal()&&(i.preventDefault(),i.stopPropagation()),s.direction==="vertical"&&v.isVertical()&&(i.preventDefault(),i.stopPropagation()))},onTouchEnd(){if(p.moving)switch(p.moving=!1,r){case"left":case"top":p.offset>35&&m.next();break;case"right":case"bottom":p.offset<-35&&m.prev();break}}},touchState:p,tabsContentRef:y,tabsContentID:T}}const Se=`${Z}-tabs`,st=q({name:Se,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),nt=q({...st,props:Ze,emits:et,setup(s,{emit:m}){const t=s,k=m,y=Ge(),{getSelectorNodeInfo:T,getSelectorNodeInfos:g}=We(y),I=ve(),p=f(null),{internalChildren:v}=Xe(Te,`${Z}-tabs`)({activeKey:d(()=>t.modelValue||0),autoHeight:d(()=>t.autoHeight),animatedTime:d(()=>t.animatedTime)}),r=f([]);function G(e){e.forEach((a,n)=>{var u,_,A,B,K,S,b,N,le;let c=a.type;if(c=c.name||c,c==="nut-tab-pane"){const x=new tt;if((u=a.props)!=null&&u.title||(_=a.props)!=null&&_["pane-key"]||(A=a.props)!=null&&A.paneKey){const oe=fe((B=a.props)==null?void 0:B["pane-key"]),Ke=oe==="number"||oe==="string"?String((K=a.props)==null?void 0:K["pane-key"]):null,ie=fe((S=a.props)==null?void 0:S.paneKey),Ne=ie==="number"||ie==="string"?String((b=a.props)==null?void 0:b.paneKey):null;x.title=(N=a.props)==null?void 0:N.title,x.paneKey=Ke||Ne||String(n),x.disabled=(le=a.props)==null?void 0:le.disabled}r.value.push(x)}else{if(a.children===" ")return;G(a.children)}})}const l=f(t.modelValue||0);function i(e){const a=r.value.findIndex(n=>n.paneKey===String(e));l.value=a}const E=d(()=>t.titleScroll&&t.direction==="horizontal"),o=d(()=>t.titleScroll&&t.direction==="vertical"),L=f([]),W=f(0),O=f(0),te=f(!1),$=f(),ae=f([]),R=f(!1);function se(){t.titleScroll&&de(()=>{Promise.all([T(`#nut-tabs__titles_${I}`),g(`#nut-tabs__titles_${I} .nut-tabs__titles-item`)]).then(([e,a])=>{var u,_,A,B;$.value=e,ae.value=a,$.value&&(t.direction==="vertical"?a.reduce((S,b)=>S+b.height,0)>((u=$.value)==null?void 0:u.height)?R.value=!0:R.value=!1:a.reduce((S,b)=>S+b.width,0)>((_=$.value)==null?void 0:_.width)?R.value=!0:R.value=!1);const n=ae.value[l.value];let c=0;t.direction==="vertical"?c=a.slice(0,l.value).reduce((b,N)=>b+N.height+0,11)-(((A=$.value)==null?void 0:A.height)-n.height)/2:c=a.slice(0,l.value).reduce((b,N)=>b+N.width+20,31)-(((B=$.value)==null?void 0:B.width)-(n==null?void 0:n.width))/2,Le(()=>{te.value=!0}),Ce(c,t.direction)})})}function Ce(e,a){let n=0;const c=a==="horizontal"?W.value:O.value,u=1;function _(){a==="horizontal"?W.value+=(e-c)/u:O.value+=(e-c)/u,++n<u&&de(_)}_()}function X(e=v.map(a=>a.vnode)){r.value=[],e=e==null?void 0:e.filter(a=>typeof a.children!="string"),e&&e.length&&G(e),i(t.modelValue),setTimeout(()=>{se()},500)}re(()=>v.map(e=>e.props),e=>{X(v)},{deep:!0,immediate:!0}),re(()=>t.modelValue,e=>{i(e),se()}),me(X),ze(X);const h={isBegin:()=>l.value===0,isEnd:()=>l.value===r.value.length-1,next:()=>{l.value+=1;const e=r.value[l.value].disabled;if(h.isEnd()&&e){h.prev();return}if(e&&l.value<r.value.length-1){h.next();return}h.updateValue(r.value[l.value])},prev:()=>{l.value-=1;const e=r.value[l.value].disabled;if(h.isBegin()&&e){h.next();return}if(e&&l.value>0){h.prev();return}h.updateValue(r.value[l.value])},updateValue:e=>{k(ge,e.paneKey),k(be,e)},tabChange:(e,a)=>{k(ee,e),!(e.disabled||l.value===a)&&(l.value=a,h.updateValue(e))},setTabItemRef:(e,a)=>{L.value[a]=e}},{tabChange:ke}=h,{touchState:Y,touchMethods:M,tabsContentID:Ie,tabsContentRef:Ee}=at(t,h,y,Oe),De=d(()=>{let e=l.value*100;Y.moving&&(e+=Y.offset);let a={transform:t.direction==="horizontal"?`translate3d(-${e}%, 0, 0)`:`translate3d( 0,-${e}%, 0)`,transitionDuration:Y.moving?void 0:`${t.animatedTime}ms`};return t.animatedTime===0&&(a={}),a}),Pe=d(()=>({background:t.background})),ne=d(()=>({color:t.type==="smile"?t.customColor:"",background:t.type==="line"?t.customColor:""})),$e=d(()=>{if(!t.titleGutter)return{};const e=Ye(t.titleGutter);return t.direction==="vertical"?{marginTop:e,marginBottom:e}:{marginLeft:e,marginRight:e}}),Ae=d(()=>_e(t,Se,{[t.direction]:!0}));return(e,a)=>{const n=pe,c=Be;return w(),V(n,{ref_key:"container",ref:p,style:P(e.customStyle),class:z(Ae.value)},{default:C(()=>[F(c,{id:`nut-tabs__titles_${D(I)}`,"scroll-x":E.value,"scroll-y":o.value,"scroll-with-animation":te.value,"scroll-left":W.value,"scroll-top":O.value,"enable-flex":!0,class:z(["nut-tabs__titles",{[e.type]:e.type,scrollable:e.titleScroll,[e.size]:e.size}]),style:P(Pe.value)},{default:C(()=>[F(n,{class:z(["nut-tabs__list",{"nut-tabs__titles-left":e.align==="left"}])},{default:C(()=>[e.$slots.titles?J(e.$slots,"titles",{key:0},void 0,!0):(w(),ue(ce,{key:1},[(w(!0),ue(ce,null,Re(r.value,(u,_)=>(w(),V(n,{key:u.paneKey,class:z(["nut-tabs__titles-item uni",{"nut-tabs-active":u.paneKey===String(e.modelValue),disabled:u.disabled,"nut-tabs__titles-item-left":e.align==="left"}]),style:P($e.value),onClick:A=>D(ke)(u,_)},{default:C(()=>[e.type==="line"?(w(),V(n,{key:0,class:"nut-tabs__titles-item__line",style:P(ne.value)},null,8,["style"])):Q("",!0),e.type==="smile"?(w(),V(n,{key:1,class:"nut-tabs__titles-item__smile",style:P(ne.value)},{default:C(()=>[F(Me,{name:"joy-smile","custom-color":e.customColor},null,8,["custom-color"])]),_:1},8,["style"])):Q("",!0),F(n,{class:z(["nut-tabs__titles-item__text",{ellipsis:e.ellipsis}])},{default:C(()=>[Fe(He(u.title),1)]),_:2},1032,["class"])]),_:2},1032,["style","class","onClick"]))),128)),R.value&&e.titleScroll?(w(),V(n,{key:0,class:"nut-tabs__titles-placeholder"})):Q("",!0)],64))]),_:3},8,["class"])]),_:3},8,["id","scroll-x","scroll-y","scroll-with-animation","scroll-left","scroll-top","class","style"]),F(n,{id:D(Ie),ref_key:"tabsContentRef",ref:Ee,class:"nut-tabs__content",style:P(De.value),onTouchstart:D(M).onTouchStart,onTouchmove:D(M).onTouchMove,onTouchend:D(M).onTouchEnd,onTouchcancel:D(M).onTouchEnd},{default:C(()=>[J(e.$slots,"default",{},void 0,!0)]),_:3},8,["id","style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])]),_:3},8,["style","class"])}}}),bt=ye(nt,[["__scopeId","data-v-1cf7eb29"]]),lt={...he,title:H(""),paneKey:H(""),disabled:Boolean},ot={[ee]:()=>!0},we=`${Z}-tab-pane`,it=q({name:we,options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),rt=q({...it,props:lt,emits:ot,setup(s){const m=s,{parent:t}=Qe(Te),k=d(()=>{const T={display:(t==null?void 0:t.animatedTime.value)===0&&m.paneKey!==t.activeKey.value?"none":void 0};return je(m,T)}),y=d(()=>_e(m,we,{inactive:String(m.paneKey)!==(t==null?void 0:t.activeKey.value)&&(t==null?void 0:t.autoHeight.value)}));return(T,g)=>{const I=pe;return w(),V(I,{style:P(k.value),class:z(y.value)},{default:C(()=>[J(T.$slots,"default",{},void 0,!0)]),_:3},8,["style","class"])}}}),gt=ye(rt,[["__scopeId","data-v-42664eef"]]);export{gt as _,bt as a,de as r};
