import{_ as x}from"./index.Dj4lZ7zg.js";import{d as T,A as D,c as W,G as ft,p as tt,C as et,k as J,o as v,a as z,w as u,g as w,b as p,e as ot,f as st,i as nt,x as pt,h as $,z as b,t as R,u as at,s as q,H as K,j as Q,F as mt,q as gt,I as kt,T as vt}from"./index.1709636774746.js";import{_ as it}from"./button.ATl534R_.js";import{c as lt,h as P,d as ht,g as ct,b as _t,P as L,f as Ct,t as It,j as wt,i as O,k as bt}from"./prefix.CG6Gj_JG.js";import{C as dt}from"./event.DRiCrrdg.js";import{u as yt,a as Pt}from"./useTouch.LXYfAfrU.js";import{_ as G}from"./plugin-vueexport-helper.DlAUqK2U.js";import{N as Z}from"./icon.sT-AJalv.js";import{u as rt}from"./useTranslate.UOVUuywj.js";import"./pxCheck.f4SXeRzl.js";const Dt={...lt,name:String,touchMoveStopPropagation:Boolean,touchMovePreventDefault:Boolean,disabled:Boolean},$t={open:o=>o instanceof Object,close:o=>o instanceof Object,[dt]:o=>P(o)},ut=`${L}-swipe`,Tt=T({name:ut,options:{virtualHost:!0,addGlobalClass:!0}}),St=T({...Tt,props:Dt,emits:$t,setup(o,{expose:c,emit:e}){const s=o,m=e,h=pt(),g=D(!1),d=W(()=>ct(s,ut));async function y(i){return(await Pt(i,h)).width||0}const S=ht(),A=`leftRef-${S}`,_=D(0),E=`rightRef-${S}`,C=D(0);async function M(){_.value=await y(A),C.value=await y(E)}const I=ft("swipeGroup",null);tt(()=>{var i;return(i=I==null?void 0:I.name)==null?void 0:i.value},i=>{s.name!==i&&I&&I.lock&&j()}),et(()=>{setTimeout(()=>{M()},100)});const t=D(!1);let l="",a="";const r=J({offset:0,moving:!1});function f(i=""){I&&I.update(s.name),t.value=!0,i&&(r.offset=i==="left"?-C.value:_.value),m("open",{name:s.name,position:l||i})}function j(){r.offset=0,t.value&&(t.value=!1,m("close",{name:s.name,position:l}))}function n(i,k,N){N?i.stopPropagation():j(),m(dt,k)}const Y=W(()=>_t(s,{transform:`translate3d(${r.offset}px, 0, 0)`}));function F(i){l=i>0?"right":"left";let k=i;switch(l){case"left":t.value&&a===l?k=-C.value:k=Math.abs(i)>C.value?-C.value:i;break;case"right":t.value&&a===l?k=_.value:k=Math.abs(i)>_.value?_.value:i;break}r.offset=k}const H=yt(),V={onTouchStart(i){s.disabled||H.start(i)},async onTouchMove(i){s.disabled||(H.move(i),H.isHorizontal()&&(g.value=!0,r.moving=!0,F(H.deltaX.value),s.touchMovePreventDefault&&i.preventDefault(),s.touchMoveStopPropagation&&i.stopPropagation()))},onTouchEnd(){if(r.moving){switch(r.moving=!1,a=l,l){case"left":Math.abs(r.offset)<=C.value/2?j():(r.offset=-C.value,f());break;case"right":Math.abs(r.offset)<=_.value/2?j():(r.offset=_.value,f());break}setTimeout(()=>{g.value=!1},0)}}};return c({open:f,close:j}),(i,k)=>{const N=nt;return v(),z(N,{class:ot(d.value),style:st(Y.value),onTouchstart:V.onTouchStart,onTouchmove:V.onTouchMove,onTouchend:V.onTouchEnd,onTouchcancel:V.onTouchEnd},{default:u(()=>[w(N,{id:A,class:"nut-swipe__left",onClick:k[0]||(k[0]=B=>n(B,"left",!0))},{default:u(()=>[p(i.$slots,"left",{},void 0,!0)]),_:3}),w(N,{class:"nut-swipe__content",onClick:k[1]||(k[1]=B=>n(B,"content",g.value))},{default:u(()=>[p(i.$slots,"default",{},void 0,!0)]),_:3}),w(N,{id:E,class:"nut-swipe__right",onClick:k[2]||(k[2]=B=>n(B,"right",!0))},{default:u(()=>[p(i.$slots,"right",{},void 0,!0)]),_:3})]),_:3},8,["class","style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])}}}),jt=G(St,[["__scopeId","data-v-36546816"]]),Ot=`${L}-address-list-item`,{translate:At}=rt(`${L}-address-list`),Et=T({name:Ot,options:{virtualHost:!0,addGlobalClass:!0}}),Nt=T({...Et,props:{item:{type:Object,default:()=>{}}},emits:["delIcon","editIcon","clickItem"],setup(o,{emit:c}){const e=o,s=c;function m(d){s("delIcon",d,e.item),d.stopPropagation()}function h(d){s("editIcon",d,e.item),d.stopPropagation()}function g(d){s("clickItem",d,e.item),d.stopPropagation()}return(d,y)=>(v(),$("div",{class:"nut-address-list-item",onClick:g},[b("div",{class:"nut-address-list-item__info"},[b("div",{class:"nut-address-list-item__info-contact"},[p(d.$slots,"content-top",{},()=>[b("div",{class:"nut-address-list-item__info-contact-name"},R(o.item.addressName),1),b("div",{class:"nut-address-list-item__info-contact-tel"},R(o.item.phone),1),o.item.defaultAddress?(v(),$("div",{key:0,class:"nut-address-list-item__info-contact-default"},R(at(At)("default")),1)):q("",!0)],!0)]),b("div",{class:"nut-address-list-item__info-handle"},[p(d.$slots,"content-icon",{},()=>[w(Z,{name:"del","custom-class":"nut-address-list-item__info-handle-del",onClick:K(m,["stop"])}),w(Z,{name:"edit","custom-class":"nut-address-list-item__info-handle-edit",onClick:K(h,["stop"])})],!0)])]),b("div",{class:"nut-address-list-item__addr"},[p(d.$slots,"content-addr",{},()=>[Q(R(o.item.fullAddress),1)],!0)])]))}}),X=G(Nt,[["__scopeId","data-v-c5453add"]]),Mt=`${L}-address-list-general`,Bt=T({name:Mt,options:{virtualHost:!0,addGlobalClass:!0}}),Rt=T({...Bt,props:{address:{type:Object},longPress:{type:Boolean,default:!1},swipeEdition:{type:Boolean,default:!1}},emits:["delIcon","editIcon","clickItem","longDown","longCopy","longSet","longDel","swipeDel"],setup(o,{emit:c}){const e=o,s=c;let m=null;const h=D(!1),g=D(!1);function d(n){s("delIcon",n,e.address),n.stopPropagation()}function y(n){s("editIcon",n,e.address),n.stopPropagation()}function S(n){h.value||(s("clickItem",n,e.address),n.stopPropagation())}function A(n){s("longDel",n,e.address),n.stopPropagation()}function _(n){m=0,g.value=!0,s("longDown",n,e.address)}function E(n){m=setTimeout(()=>{_(n)},300)}function C(){clearTimeout(m)}function M(){clearTimeout(m)}function I(){g.value=!1}function t(n){s("longCopy",n,e.address),n.stopPropagation()}function l(n){s("longSet",n,e.address),n.stopPropagation()}function a(n){m!==0&&(g.value=!1),n.stopPropagation(),n.preventDefault()}function r(n){s("swipeDel",n,e.address),n.stopPropagation()}function f(){h.value=!1}function j(){h.value=!0}return(n,Y)=>{const F=nt;return o.swipeEdition?(v(),z(jt,{key:1},{right:u(()=>[w(F,{style:{height:"100%"}},{default:u(()=>[p(n.$slots,"swipe-right-btn",{},()=>[w(it,{shape:"square","custom-style":"height: 100%;",type:"danger",onClick:K(r,["stop"])},{default:u(()=>[Q(" 删除 ")]),_:1})],!0)]),_:3})]),default:u(()=>[b("div",{class:"nut-address-list-swipe"},[w(X,{item:o.address,onDelIcon:d,onEditIcon:y,onClickItem:S,onTouchmove:j,onTouchstart:f},{"content-top":u(()=>[p(n.$slots,"content-info",{},void 0,!0)]),"content-icon":u(()=>[p(n.$slots,"content-icons",{},void 0,!0)]),"content-addr":u(()=>[p(n.$slots,"content-addrs",{},void 0,!0)]),_:3},8,["item"])])]),_:3})):(v(),$("div",{key:0,class:"nut-address-list-general"},[w(X,{item:o.address,onDelIcon:d,onEditIcon:y,onClickItem:S,onTouchstart:E,onTouchend:M,onTouchmove:C},{"content-top":u(()=>[p(n.$slots,"content-info",{},void 0,!0)]),"content-icon":u(()=>[p(n.$slots,"content-icons",{},void 0,!0)]),"content-addr":u(()=>[p(n.$slots,"content-addrs",{},void 0,!0)]),_:3},8,["item"]),o.longPress&&g.value?(v(),$("div",{key:0,class:"nut-address-list-general__mask",onClick:a},[p(n.$slots,"longpress-all",{},()=>[b("div",{class:"nut-address-list-general__mask-copy",onClick:t}," 复制地址 "),b("div",{class:"nut-address-list-general__mask-set",onClick:l}," 设置默认 "),b("div",{class:"nut-address-list-general__mask-del",onClick:A}," 删除地址 ")],!0)])):q("",!0),g.value?(v(),$("div",{key:1,class:"nut-address-list__mask-bottom",onClick:I})):q("",!0)]))}}}),Lt=G(Rt,[["__scopeId","data-v-01c7ca4c"]]),Gt={...lt,data:Ct([]),longPress:Boolean,swipeEdition:Boolean,showBottomButton:It,options:wt({})},Ht={delIcon:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),editIcon:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),clickItem:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),longCopy:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),longSet:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),longDel:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),swipeDel:(o,c,e)=>o instanceof Object&&c instanceof Object&&(O(e)||P(e)),add:o=>o instanceof Object},U=`${L}-address-list`,{translate:Vt}=rt(U),qt=T({name:U,options:{virtualHost:!0,addGlobalClass:!0}}),zt=T({...qt,props:Gt,emits:Ht,setup(o,{emit:c}){const e=o,s=c,m=D([]),h=J({id:2,addressName:"姓名",phone:"123****4567",defaultAddress:!1,fullAddress:"北京市通州区测试测试测试测试测试测试测试测试测试"}),g=W(()=>ct(e,U));function d(){Object.keys(e.options).length>0&&(m.value=e.data.map(t=>bt(h,t,e.options)))}tt(()=>e.data,()=>d(),{deep:!0});function y(t,l,a){s("delIcon",t,l,a),t.stopPropagation()}function S(t,l,a){s("editIcon",t,l,a),t.stopPropagation()}function A(t,l,a){s("clickItem",t,l,a),t.stopPropagation()}function _(t,l,a){s("longCopy",t,l,a),t.stopPropagation()}function E(t,l,a){s("longSet",t,l,a),t.stopPropagation()}function C(t,l,a){s("longDel",t,l,a),t.stopPropagation()}function M(t,l,a){s("swipeDel",t,l,a),t.stopPropagation()}function I(t){s("add",t),t.stopPropagation()}return et(()=>{d()}),(t,l)=>(v(),$("div",{class:ot(g.value),style:st(t.customStyle)},[(v(!0),$(mt,null,gt(m.value,(a,r)=>(v(),z(Lt,{key:r,address:a,"long-press":t.longPress,"swipe-edition":t.swipeEdition,onDelIcon:f=>y(f,a,r),onEditIcon:f=>S(f,a,r),onClickItem:f=>A(f,a,r),onSwipeDel:f=>M(f,a,r),onLongCopy:f=>_(f,a,r),onLongSet:f=>E(f,a,r),onLongDel:f=>C(f,a,r)},kt({"content-info":u(()=>[p(t.$slots,"itemInfos",{item:a},void 0,!0)]),"content-icons":u(()=>[p(t.$slots,"itemIcon",{item:a},void 0,!0)]),"content-addrs":u(()=>[p(t.$slots,"itemAddr",{item:a},void 0,!0)]),_:2},[t.longPress?{name:"longpress-all",fn:u(()=>[p(t.$slots,"longpressBtns",{item:a},void 0,!0)]),key:"0"}:void 0,t.swipeEdition?{name:"swipe-right-btn",fn:u(()=>[p(t.$slots,"swipeRight",{item:a},void 0,!0)]),key:"1"}:void 0]),1032,["address","long-press","swipe-edition","onDelIcon","onEditIcon","onClickItem","onSwipeDel","onLongCopy","onLongSet","onLongDel"]))),128)),t.showBottomButton?(v(),$("div",{key:0,class:"nut-address-list__bottom",onClick:I},[w(it,{block:"",type:"danger"},{default:u(()=>[Q(R(at(Vt)("addAddress")),1)]),_:1})])):q("",!0)],6))}}),Ft=G(zt,[["__scopeId","data-v-28939f76"]]),Wt={components:{AppProvider:x},setup(){const o=vt(),c=D([{testid:3,testaddressName:"姓名",phone:"123****4567",defaultAddress:!1,fullAddress:"北京市通州区测试测试测试测试测试测试测试测试测试"},{testid:4,testaddressName:"姓名",phone:"123****4567",defaultAddress:!0,fullAddress:"北京市通州区测试测试测试测试测试测试测试测试测试"}]),e=J({id:"testid",addressDetail:"testaddressDetail",addressName:"testaddressName"});return{data:c,clickItem:()=>{console.log("Click To Address")},delClick:()=>{console.log("Click To Delete")},editClick:()=>{console.log("Click To Edit"),o.push({path:"/pages/address/manager",query:{key:"edit",page:"1",limit:"15"}})},delClickSwipe:()=>{console.log("Click On DelClickSwipe")},addAddress:()=>{console.log("Click To Add"),o.push({path:"/pages/address/manager",query:{key:"add",page:"1",limit:"15"}})},dataOptions:e}}};function Kt(o,c,e,s,m,h){const g=Ft,d=x;return v(),z(d,{class:"flex flex-col p-5 content"},{default:u(()=>[w(g,{data:s.data,"swipe-edition":"","show-bottom-button":"",onEditIcon:s.editClick,onDelIcon:s.delClick,onClickItem:s.clickItem,onSwipeDel:s.delClickSwipe,onAdd:s.addAddress,options:s.dataOptions},null,8,["data","onEditIcon","onDelIcon","onClickItem","onSwipeDel","onAdd","options"])]),_:1})}const se=G(Wt,[["render",Kt]]);export{se as default};
