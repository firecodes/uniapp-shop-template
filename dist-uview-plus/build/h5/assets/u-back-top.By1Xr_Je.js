import{m as i,n as S,p as $,q as g,s as v,a as d,c as p,w as o,b as c,t as b,j as E,F as z,k as W,x as w,v as f,e as B,y as R,f as N,g as k,l as D,_ as C,u as x,a0 as I}from"./index.1709861520277.js";import{_ as O}from"./index.3VICL1Hg.js";import{_ as T}from"./plugin-vueexport-helper.DlAUqK2U.js";import{_ as P}from"./u-icon.DtTPaVwp.js";const V={props:{duration:{type:Number,default:i.tabs.duration},list:{type:Array,default:i.tabs.list},lineColor:{type:String,default:i.tabs.lineColor},activeStyle:{type:[String,Object],default:i.tabs.activeStyle},inactiveStyle:{type:[String,Object],default:i.tabs.inactiveStyle},lineWidth:{type:[String,Number],default:i.tabs.lineWidth},lineHeight:{type:[String,Number],default:i.tabs.lineHeight},lineBgSize:{type:String,default:i.tabs.lineBgSize},itemStyle:{type:[String,Object],default:i.tabs.itemStyle},scrollable:{type:Boolean,default:i.tabs.scrollable},current:{type:[Number,String],default:i.tabs.current},keyName:{type:String,default:i.tabs.keyName}}},H={name:"u-tabs",mixins:[S,$,V],data(){return{firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}},watch:{current:{immediate:!0,handler(e,t){e!==this.innerCurrent&&(this.innerCurrent=e,this.$nextTick(()=>{this.resize()}))}},list(){this.$nextTick(()=>{this.resize()})}},computed:{textStyle(){return e=>{const t={},r=e===this.innerCurrent?uni.$u.addStyle(this.activeStyle):uni.$u.addStyle(this.inactiveStyle);return this.list[e].disabled&&(t.color="#c8c9cc"),uni.$u.deepMerge(r,t)}},propsBadge(){return uni.$u.props.badge}},async mounted(){this.init()},emits:["click","change"],methods:{setLineLeft(){const e=this.list[this.innerCurrent];if(!e)return;let t=this.list.slice(0,this.innerCurrent).reduce((n,l)=>n+l.rect.width,0);const r=uni.$u.getPx(this.lineWidth);this.lineOffsetLeft=t+(e.rect.width-r)/2,this.firstTime&&setTimeout(()=>{this.firstTime=!1},10)},animation(e,t=0){},clickHandler(e,t){this.$emit("click",{...e,index:t}),!e.disabled&&(this.innerCurrent=t,this.resize(),this.$emit("change",{...e,index:t}))},init(){uni.$u.sleep().then(()=>{this.resize()})},setScrollLeft(){const e=this.list[this.innerCurrent],t=this.list.slice(0,this.innerCurrent).reduce((l,a)=>l+a.rect.width,0),r=uni.$u.sys().windowWidth;let n=t-(this.tabsRect.width-e.rect.width)/2-(r-this.tabsRect.right)/2+this.tabsRect.left/2;n=Math.min(n,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,n)},resize(){this.list.length!==0&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then(([e,t=[]])=>{this.tabsRect=e,this.scrollViewWidth=0,t.map((r,n)=>{this.scrollViewWidth+=r.width,this.list[n].rect=r}),this.setLineLeft(),this.setScrollLeft()})},getTabsRect(){return new Promise(e=>{this.queryRect("u-tabs__wrapper__scroll-view").then(t=>e(t))})},getAllItemRect(){return new Promise(e=>{const t=this.list.map((r,n)=>this.queryRect(`u-tabs__wrapper__nav__item-${n}`,!0));Promise.all(t).then(r=>e(r))})},queryRect(e,t){return new Promise(r=>{this.$uGetRect(`.${e}`).then(n=>{r(n)})})}}};function F(e,t,r,n,l,a){const h=N,m=g(v("u-badge"),O),u=k,y=D;return d(),p(u,{class:"u-tabs"},{default:o(()=>[c(u,{class:"u-tabs__wrapper"},{default:o(()=>[b(e.$slots,"left",{},void 0,!0),c(u,{class:"u-tabs__wrapper__scroll-view-wrapper"},{default:o(()=>[c(y,{"scroll-x":e.scrollable,"scroll-left":l.scrollLeft,"scroll-with-animation":"",class:"u-tabs__wrapper__scroll-view","show-scrollbar":!1,ref:"u-tabs__wrapper__scroll-view"},{default:o(()=>[c(u,{class:"u-tabs__wrapper__nav",ref:"u-tabs__wrapper__nav"},{default:o(()=>[(d(!0),E(z,null,W(e.list,(s,_)=>(d(),p(u,{class:w(["u-tabs__wrapper__nav__item",[`u-tabs__wrapper__nav__item-${_}`,s.disabled&&"u-tabs__wrapper__nav__item--disabled"]]),key:_,onClick:K=>a.clickHandler(s,_),ref_for:!0,ref:`u-tabs__wrapper__nav__item-${_}`,style:f([e.$u.addStyle(e.itemStyle),{flex:e.scrollable?"":1}])},{default:o(()=>[c(h,{class:w([[s.disabled&&"u-tabs__wrapper__nav__item__text--disabled"],"u-tabs__wrapper__nav__item__text"]),style:f([a.textStyle(_)])},{default:o(()=>[B(R(s[e.keyName]),1)]),_:2},1032,["class","style"]),c(m,{show:!!(s.badge&&(s.badge.show||s.badge.isDot||s.badge.value)),isDot:s.badge&&s.badge.isDot||a.propsBadge.isDot,value:s.badge&&s.badge.value||a.propsBadge.value,max:s.badge&&s.badge.max||a.propsBadge.max,type:s.badge&&s.badge.type||a.propsBadge.type,showZero:s.badge&&s.badge.showZero||a.propsBadge.showZero,bgColor:s.badge&&s.badge.bgColor||a.propsBadge.bgColor,color:s.badge&&s.badge.color||a.propsBadge.color,shape:s.badge&&s.badge.shape||a.propsBadge.shape,numberType:s.badge&&s.badge.numberType||a.propsBadge.numberType,inverted:s.badge&&s.badge.inverted||a.propsBadge.inverted,customStyle:"margin-left: 4px;"},null,8,["show","isDot","value","max","type","showZero","bgColor","color","shape","numberType","inverted"])]),_:2},1032,["onClick","style","class"]))),128)),c(u,{class:"u-tabs__wrapper__nav__line",ref:"u-tabs__wrapper__nav__line",style:f([{width:e.$u.addUnit(e.lineWidth),transform:`translate(${l.lineOffsetLeft}px)`,transitionDuration:`${l.firstTime?0:e.duration}ms`,height:e.$u.addUnit(e.lineHeight),background:e.lineColor,backgroundSize:e.lineBgSize}])},null,8,["style"])]),_:1},512)]),_:1},8,["scroll-x","scroll-left"])]),_:1}),b(e.$slots,"right",{},void 0,!0)]),_:3})]),_:3})}const te=T(H,[["render",F],["__scopeId","data-v-c843c849"]]),j={props:{show:{type:Boolean,default:i.transition.show},mode:{type:String,default:i.transition.mode},duration:{type:[String,Number],default:i.transition.duration},timingFunction:{type:String,default:i.transition.timingFunction}}},L=e=>({enter:`u-${e}-enter u-${e}-enter-active`,"enter-to":`u-${e}-enter-to u-${e}-enter-active`,leave:`u-${e}-leave u-${e}-leave-active`,"leave-to":`u-${e}-leave-to u-${e}-leave-active`}),A={methods:{clickHandler(){this.$emit("click")},async vueEnter(){const e=L(this.mode);this.status="enter",this.$emit("beforeEnter"),this.inited=!0,this.display=!0,this.classes=e.enter,await C(),await uni.$u.sleep(20),this.$emit("enter"),this.transitionEnded=!1,this.$emit("afterEnter"),this.classes=e["enter-to"]},async vueLeave(){if(!this.display)return;const e=L(this.mode);this.status="leave",this.$emit("beforeLeave"),this.classes=e.leave,await C(),this.transitionEnded=!1,this.$emit("leave"),setTimeout(this.onTransitionEnd,this.duration),this.classes=e["leave-to"]},onTransitionEnd(){this.transitionEnded||(this.transitionEnded=!0,this.$emit(this.status==="leave"?"afterLeave":"afterEnter"),!this.show&&this.display&&(this.display=!1,this.inited=!1))}}},M={name:"u-transition",data(){return{inited:!1,viewStyle:{},status:"",transitionEnded:!1,display:!1,classes:""}},emits:["click","beforeEnter","enter","afterEnter","beforeLeave","leave","afterLeave"],computed:{mergeStyle(){const{viewStyle:e,customStyle:t}=this;return{transitionDuration:`${this.duration}ms`,transitionTimingFunction:this.timingFunction,...uni.$u.addStyle(t),...e}}},mixins:[S,$,A,j],watch:{show:{handler(e){e?this.vueEnter():this.vueLeave()},immediate:!0}}};function q(e,t,r,n,l,a){const h=k;return l.inited?(d(),p(h,{key:0,class:w(["u-transition",l.classes]),ref:"u-transition",onClick:e.clickHandler,style:f([a.mergeStyle]),onTouchmove:e.noop},{default:o(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3},8,["onClick","class","style","onTouchmove"])):x("",!0)}const U=T(M,[["render",q],["__scopeId","data-v-1d06040d"]]),Z={props:{mode:{type:String,default:i.backtop.mode},icon:{type:String,default:i.backtop.icon},text:{type:String,default:i.backtop.text},duration:{type:[String,Number],default:i.backtop.duration},scrollTop:{type:[String,Number],default:i.backtop.scrollTop},top:{type:[String,Number],default:i.backtop.top},bottom:{type:[String,Number],default:i.backtop.bottom},right:{type:[String,Number],default:i.backtop.right},zIndex:{type:[String,Number],default:i.backtop.zIndex},iconStyle:{type:Object,default:i.backtop.iconStyle}}},G={name:"u-back-top",mixins:[S,$,Z],computed:{backTopStyle(){return{bottom:uni.$u.addUnit(this.bottom),right:uni.$u.addUnit(this.right),width:"40px",height:"40px",position:"fixed",zIndex:10}},show(){return uni.$u.getPx(this.scrollTop)>uni.$u.getPx(this.top)},contentStyle(){const e={};let t=0;return this.mode==="circle"?t="100px":t="4px",e.borderTopLeftRadius=t,e.borderTopRightRadius=t,e.borderBottomLeftRadius=t,e.borderBottomRightRadius=t,uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},emits:["click"],methods:{backToTop(){I({scrollTop:0,duration:this.duration}),this.$emit("click")}}};function J(e,t,r,n,l,a){const h=g(v("u-icon"),P),m=N,u=k,y=g(v("u-transition"),U);return d(),p(y,{mode:"fade",customStyle:a.backTopStyle,show:a.show},{default:o(()=>[!e.$slots.default&&!e.$slots.$default?(d(),p(u,{key:0,class:"u-back-top",style:f([a.contentStyle]),onClick:a.backToTop},{default:o(()=>[c(h,{name:e.icon,"custom-style":e.iconStyle},null,8,["name","custom-style"]),e.text?(d(),p(m,{key:0,class:"u-back-top__text"},{default:o(()=>[B(R(e.text),1)]),_:1})):x("",!0)]),_:1},8,["style","onClick"])):b(e.$slots,"default",{key:1},void 0,!0)]),_:3},8,["customStyle","show"])}const se=T(G,[["render",J],["__scopeId","data-v-8c553edf"]]);export{U as _,te as a,se as b};
