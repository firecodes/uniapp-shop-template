import{aC as me,aD as ae,aE as le,aF as Ve,r as C,aG as Me,aH as Ue,aI as We,aJ as Fe,aK as Te,B as V,D as O,$ as oe,a4 as D,G as M,aL as Q,a as se,a2 as _,at as xe,C as ye,aM as Ze,X as B,ai as p,aN as q,O as A,aj as z,aO as Se,aP as Ye,e as b,L as j,ar as te,o as we,Y as ee,P as je,a1 as F,W as Xe,aQ as Ke,aR as Ge,a5 as fe,aa as ie,aS as Je,aT as qe,aU as ve,ad as Qe,aV as pe,K as et,E as tt,H as nt,as as at,aW as it,aX as lt,U as ot,k as st,a7 as rt,z as ct,aY as dt,aZ as ut,J as ft,a3 as he,a_ as vt,a$ as ht,av as Ce,ag as gt,ac as bt}from"./index-b6baaa43.js";import{u as ke}from"./use-id-2077b3eb.js";import{a as mt,r as Tt}from"./use-route-29860e60.js";function xt(e,o,i){let l,u=0;const t=e.scrollLeft,c=i===0?1:Math.round(i*1e3/16);function a(){me(l)}function v(){e.scrollLeft+=(o-t)/c,++u<c&&(l=ae(v))}return v(),a}function yt(e,o,i,l){let u,t=le(e);const c=t<o,a=i===0?1:Math.round(i*1e3/16),v=(o-t)/a;function m(){me(u)}function S(){t+=v,(c&&t>o||!c&&t<o)&&(t=o),Ve(e,t),c&&t<o||!c&&t>o?u=ae(S):l&&(u=ae(l))}return S(),m}function St(){const e=C([]),o=[];return Me(()=>{e.value=[]}),[e,l=>(o[l]||(o[l]=u=>{e.value[l]=u}),o[l])]}function Re(e,o){if(!Ue||!window.IntersectionObserver)return;const i=new IntersectionObserver(t=>{o(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&i.observe(e.value)},u=()=>{e.value&&i.unobserve(e.value)};We(u),Fe(u),Te(l)}const[wt,Ct]=V("sticky"),kt={zIndex:O,position:oe("top"),container:Object,offsetTop:D(0),offsetBottom:D(0)};var Rt=M({name:wt,props:kt,emits:["scroll","change"],setup(e,{emit:o,slots:i}){const l=C(),u=Q(l),t=se({fixed:!1,width:0,height:0,transform:0}),c=C(!1),a=_(()=>xe(e.position==="top"?e.offsetTop:e.offsetBottom)),v=_(()=>{if(c.value)return;const{fixed:f,height:w,width:s}=t;if(f)return{width:`${s}px`,height:`${w}px`}}),m=_(()=>{if(!t.fixed||c.value)return;const f=ye(Ze(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${a.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),S=f=>o("scroll",{scrollTop:f,isFixed:t.fixed}),$=()=>{if(!l.value||q(l))return;const{container:f,position:w}=e,s=z(l),x=le(window);if(t.width=s.width,t.height=s.height,w==="top")if(f){const d=z(f),k=d.bottom-a.value-t.height;t.fixed=a.value>s.top&&d.bottom>0,t.transform=k<0?k:0}else t.fixed=a.value>s.top;else{const{clientHeight:d}=document.documentElement;if(f){const k=z(f),g=d-k.top-a.value-t.height;t.fixed=d-a.value<s.bottom&&d>k.top,t.transform=g<0?-g:0}else t.fixed=d-a.value<s.bottom}S(x)};return B(()=>t.fixed,f=>o("change",f)),p("scroll",$,{target:u,passive:!0}),Re(l,$),B([Se,Ye],()=>{!l.value||q(l)||!t.fixed||(c.value=!0,A(()=>{const f=z(l);t.width=f.width,t.height=f.height,c.value=!1}))}),()=>{var f;return b("div",{ref:l,style:v.value},[b("div",{class:Ct({fixed:t.fixed&&!c.value}),style:m.value},[(f=i.default)==null?void 0:f.call(i)])])}}});const It=j(Rt),[$t,ge]=V("tabs");var Bt=M({name:$t,props:{count:te(Number),inited:Boolean,animated:Boolean,duration:te(O),swipeable:Boolean,lazyRender:Boolean,currentIndex:te(Number)},emits:["change"],setup(e,{emit:o,slots:i}){const l=C(),u=a=>o("change",a),t=()=>{var a;const v=(a=i.default)==null?void 0:a.call(i);return e.animated||e.swipeable?b(je,{ref:l,loop:!1,class:ge("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:u},{default:()=>[v]}):v},c=a=>{const v=l.value;v&&v.state.active!==a&&v.swipeTo(a,{immediate:!e.inited})};return B(()=>e.currentIndex,c),we(()=>{c(e.currentIndex)}),ee({swipeRef:l}),()=>b("div",{class:ge("content",{animated:e.animated||e.swipeable})},[t()])}});const[Ie,J]=V("tabs"),Pt={type:oe("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:D(0),duration:D(.3),animated:Boolean,ellipsis:F,swipeable:Boolean,scrollspy:Boolean,offsetTop:D(0),background:String,lazyRender:F,showHeader:F,lineWidth:O,lineHeight:O,beforeChange:Function,swipeThreshold:D(5),titleActiveColor:String,titleInactiveColor:String},$e=Symbol(Ie);var _t=M({name:Ie,props:Pt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:o,slots:i}){let l,u,t,c,a;const v=C(),m=C(),S=C(),$=C(),f=ke(),w=Q(v),[s,x]=St(),{children:d,linkChildren:k}=Xe($e),g=se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),E=_(()=>d.length>+e.swipeThreshold||!e.ellipsis||e.shrink),r=_(()=>({borderColor:e.color,background:e.background})),y=(n,h)=>{var T;return(T=n.name)!=null?T:h},H=_(()=>{const n=d[g.currentIndex];if(n)return y(n,g.currentIndex)}),U=_(()=>xe(e.offsetTop)),re=_(()=>e.sticky?U.value+l:0),Z=n=>{const h=m.value,T=s.value;if(!E.value||!h||!T||!T[g.currentIndex])return;const I=T[g.currentIndex].$el,R=I.offsetLeft-(h.offsetWidth-I.offsetWidth)/2;c&&c(),c=xt(h,R,n?0:+e.duration)},L=()=>{const n=g.inited;A(()=>{const h=s.value;if(!h||!h[g.currentIndex]||e.type!=="line"||q(v.value))return;const T=h[g.currentIndex].$el,{lineWidth:I,lineHeight:R}=e,P=T.offsetLeft+T.offsetWidth/2,N={width:fe(I),backgroundColor:e.color,transform:`translateX(${P}px) translateX(-50%)`};if(n&&(N.transitionDuration=`${e.duration}s`),ie(R)){const G=fe(R);N.height=G,N.borderRadius=G}g.lineStyle=N})},_e=n=>{const h=n<g.currentIndex?-1:1;for(;n>=0&&n<d.length;){if(!d[n].disabled)return n;n+=h}},X=(n,h)=>{const T=_e(n);if(!ie(T))return;const I=d[T],R=y(I,T),P=g.currentIndex!==null;g.currentIndex!==T&&(g.currentIndex=T,h||Z(),L()),R!==e.active&&(o("update:active",R),P&&o("change",R,I.title)),t&&!e.scrollspy&&qe(Math.ceil(ve(v.value)-U.value))},K=(n,h)=>{const T=d.find((R,P)=>y(R,P)===n),I=T?d.indexOf(T):0;X(I,h)},ce=(n=!1)=>{if(e.scrollspy){const h=d[g.currentIndex].$el;if(h&&w.value){const T=ve(h,w.value)-re.value;u=!0,a&&a(),a=yt(w.value,T,n?0:+e.duration,()=>{u=!1})}}},He=(n,h,T)=>{const{title:I,disabled:R}=d[h],P=y(d[h],h);R||(Qe(e.beforeChange,{args:[P],done:()=>{X(h),ce()}}),mt(n)),o("clickTab",{name:P,title:I,event:T,disabled:R})},De=n=>{t=n.isFixed,o("scroll",n)},Ae=n=>{A(()=>{K(n),ce(!0)})},Ee=()=>{for(let n=0;n<d.length;n++){const{top:h}=z(d[n].$el);if(h>re.value)return n===0?0:n-1}return d.length-1},Le=()=>{if(e.scrollspy&&!u){const n=Ee();X(n)}},ze=()=>{if(e.type==="line"&&d.length)return b("div",{class:J("line"),style:g.lineStyle},null)},de=()=>{var n,h,T;const{type:I,border:R,sticky:P}=e,N=[b("div",{ref:P?void 0:S,class:[J("wrap"),{[Je]:I==="line"&&R}]},[b("div",{ref:m,role:"tablist",class:J("nav",[I,{shrink:e.shrink,complete:E.value}]),style:r.value,"aria-orientation":"horizontal"},[(n=i["nav-left"])==null?void 0:n.call(i),d.map(G=>G.renderTitle(He)),ze(),(h=i["nav-right"])==null?void 0:h.call(i)])]),(T=i["nav-bottom"])==null?void 0:T.call(i)];return P?b("div",{ref:S},[N]):N},ue=()=>{L(),A(()=>{var n,h;Z(!0),(h=(n=$.value)==null?void 0:n.swipeRef.value)==null||h.resize()})};B(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],L),B(Se,ue),B(()=>e.active,n=>{n!==H.value&&K(n)}),B(()=>d.length,()=>{g.inited&&(K(e.active),L(),A(()=>{Z(!0)}))});const Oe=()=>{K(e.active,!0),A(()=>{g.inited=!0,S.value&&(l=z(S.value).height),Z(!0)})},Ne=(n,h)=>o("rendered",n,h);return ee({resize:ue,scrollTo:Ae}),Ke(L),Ge(L),Te(Oe),Re(v,L),p("scroll",Le,{target:w,passive:!0}),k({id:f,props:e,setLine:L,scrollable:E,onRendered:Ne,currentName:H,setTitleRefs:x,scrollIntoView:Z}),()=>b("div",{ref:v,class:J([e.type])},[e.showHeader?e.sticky?b(It,{container:v.value,offsetTop:U.value,onScroll:De},{default:()=>[de()]}):de():null,b(Bt,{ref:$,count:d.length,inited:g.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:g.currentIndex,onChange:X},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}});const Be=Symbol(),Ht=()=>pe(Be,null),[Dt,be]=V("tab"),At=M({name:Dt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:O,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:F},setup(e,{slots:o}){const i=_(()=>{const u={},{type:t,color:c,disabled:a,isActive:v,activeColor:m,inactiveColor:S}=e;c&&t==="card"&&(u.borderColor=c,a||(v?u.backgroundColor=c:u.color=c));const f=v?m:S;return f&&(u.color=f),u}),l=()=>{const u=b("span",{class:be("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||ie(e.badge)&&e.badge!==""?b(et,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[u]}):u};return()=>b("div",{id:e.id,role:"tab",class:[be([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[l()])}}),[Et,ne]=V("tab"),Lt=ye({},Tt,{dot:Boolean,name:O,badge:O,title:String,disabled:Boolean,titleClass:tt,titleStyle:[String,Object],showZeroBadge:F});var zt=M({name:Et,props:Lt,setup(e,{slots:o}){const i=ke(),l=C(!1),u=vt(),{parent:t,index:c}=nt($e);if(!t)return;const a=()=>{var s;return(s=e.name)!=null?s:c.value},v=()=>{l.value=!0,t.props.lazyRender&&A(()=>{t.onRendered(a(),e.title)})},m=_(()=>{const s=a()===t.currentName.value;return s&&!l.value&&v(),s}),S=C(""),$=C("");at(()=>{const{titleClass:s,titleStyle:x}=e;S.value=s?ct(s):"",$.value=x&&typeof x!="string"?dt(ut(x)):x});const f=s=>b(At,ft({key:i,id:`${t.id}-${c.value}`,ref:t.setTitleRefs(c.value),style:$.value,class:S.value,isActive:m.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:x=>s(u.proxy,c.value,x)},he(t.props,["type","color","shrink"]),he(e,["dot","badge","title","disabled","showZeroBadge"])),{title:o.title}),w=C(!m.value);return B(m,s=>{s?w.value=!1:it(()=>{w.value=!0})}),B(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),lt(Be,m),ee({id:i,renderTitle:f}),()=>{var s;const x=`${t.id}-${c.value}`,{animated:d,swipeable:k,scrollspy:g,lazyRender:E}=t.props;if(!o.default&&!d)return;const r=g||m.value;if(d||k)return b(ot,{id:i,role:"tabpanel",class:ne("panel-wrapper",{inactive:w.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":x},{default:()=>{var U;return[b("div",{class:ne("panel")},[(U=o.default)==null?void 0:U.call(o)])]}});const H=l.value||g||!E?(s=o.default)==null?void 0:s.call(o):null;return st(b("div",{id:i,role:"tabpanel",class:ne("panel"),tabindex:r?0:-1,"aria-labelledby":x},[H]),[[rt,r]])}}});const Gt=j(zt),Jt=j(_t),[Ot,W,Nt]=V("list"),Vt={error:Boolean,offset:D(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:oe("down"),loadingText:String,finishedText:String,immediateCheck:F};var Mt=M({name:Ot,props:Vt,emits:["load","update:error","update:loading"],setup(e,{emit:o,slots:i}){const l=C(e.loading),u=C(),t=C(),c=Ht(),a=Q(u),v=_(()=>e.scroller||a.value),m=()=>{A(()=>{if(l.value||e.finished||e.disabled||e.error||(c==null?void 0:c.value)===!1)return;const{direction:s}=e,x=+e.offset,d=z(v);if(!d.height||q(u))return;let k=!1;const g=z(t);s==="up"?k=d.top-g.top<=x:k=g.bottom-d.bottom<=x,k&&(l.value=!0,o("update:loading",!0),o("load"))})},S=()=>{if(e.finished){const s=i.finished?i.finished():e.finishedText;if(s)return b("div",{class:W("finished-text")},[s])}},$=()=>{o("update:error",!1),m()},f=()=>{if(e.error){const s=i.error?i.error():e.errorText;if(s)return b("div",{role:"button",class:W("error-text"),tabindex:0,onClick:$},[s])}},w=()=>{if(l.value&&!e.finished&&!e.disabled)return b("div",{class:W("loading")},[i.loading?i.loading():b(Ce,{class:W("loading-icon")},{default:()=>[e.loadingText||Nt("loading")]})])};return B(()=>[e.loading,e.finished,e.error],m),c&&B(c,s=>{s&&m()}),ht(()=>{l.value=e.loading}),we(()=>{e.immediateCheck&&m()}),ee({check:m}),p("scroll",m,{target:v,passive:!0}),()=>{var s;const x=(s=i.default)==null?void 0:s.call(i),d=b("div",{ref:t,class:W("placeholder")},null);return b("div",{ref:u,role:"feed",class:W(),"aria-busy":l.value},[e.direction==="down"?x:d,w(),S(),f(),e.direction==="up"?x:d])}}});const qt=j(Mt),[Ut,Y,Wt]=V("pull-refresh"),Pe=50,Ft=["pulling","loosing","success"],Zt={disabled:Boolean,modelValue:Boolean,headHeight:D(Pe),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:O,successDuration:D(500),animationDuration:D(300)};var Yt=M({name:Ut,props:Zt,emits:["change","refresh","update:modelValue"],setup(e,{emit:o,slots:i}){let l;const u=C(),t=C(),c=Q(u),a=se({status:"normal",distance:0,duration:0}),v=gt(),m=()=>{if(e.headHeight!==Pe)return{height:`${e.headHeight}px`}},S=()=>a.status!=="loading"&&a.status!=="success"&&!e.disabled,$=r=>{const y=+(e.pullDistance||e.headHeight);return r>y&&(r<y*2?r=y+(r-y)/2:r=y*1.5+(r-y*2)/4),Math.round(r)},f=(r,y)=>{const H=+(e.pullDistance||e.headHeight);a.distance=r,y?a.status="loading":r===0?a.status="normal":r<H?a.status="pulling":a.status="loosing",o("change",{status:a.status,distance:r})},w=()=>{const{status:r}=a;return r==="normal"?"":e[`${r}Text`]||Wt(r)},s=()=>{const{status:r,distance:y}=a;if(i[r])return i[r]({distance:y});const H=[];return Ft.includes(r)&&H.push(b("div",{class:Y("text")},[w()])),r==="loading"&&H.push(b(Ce,{class:Y("loading")},{default:w})),H},x=()=>{a.status="success",setTimeout(()=>{f(0)},+e.successDuration)},d=r=>{l=le(c.value)===0,l&&(a.duration=0,v.start(r))},k=r=>{S()&&d(r)},g=r=>{if(S()){l||d(r);const{deltaY:y}=v;v.move(r),l&&y.value>=0&&v.isVertical()&&(bt(r),f($(y.value)))}},E=()=>{l&&v.deltaY.value&&S()&&(a.duration=+e.animationDuration,a.status==="loosing"?(f(+e.headHeight,!0),o("update:modelValue",!0),A(()=>o("refresh"))):f(0))};return B(()=>e.modelValue,r=>{a.duration=+e.animationDuration,r?f(+e.headHeight,!0):i.success||e.successText?x():f(0,!1)}),p("touchmove",g,{target:t}),()=>{var r;const y={transitionDuration:`${a.duration}ms`,transform:a.distance?`translate3d(0,${a.distance}px, 0)`:""};return b("div",{ref:u,class:Y()},[b("div",{ref:t,class:Y("track"),style:y,onTouchstartPassive:k,onTouchend:E,onTouchcancel:E},[b("div",{class:Y("head"),style:m()},[s()]),(r=i.default)==null?void 0:r.call(i)])])}}});const Qt=j(Yt);export{qt as L,Qt as P,Jt as T,Gt as a};
