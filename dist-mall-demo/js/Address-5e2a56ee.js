import{B as b,G as h,W as C,X as B,Z as S,e as l,D as I,E as P,L as v,C as T,H as w,a3 as D,J as L,ar as E,$ as y,I as N,a0 as _,a1 as V,j as R,u as q,a as G,o as j,b as k,c as z,d as F,Q as x}from"./index-b6baaa43.js";import{T as H}from"./index-f7c480a6.js";import{C as O}from"./index-1c1d86b7.js";import{B as U}from"./index-c2ffc462.js";import{c as J,s as K}from"./index-f0222efe.js";import{s as M}from"./SimpleHeader-eb02e727.js";import{b as Q}from"./address-f7da8579.js";import"./use-route-29860e60.js";const[$,W]=b("radio-group"),X={shape:String,disabled:Boolean,iconSize:I,direction:String,modelValue:P,checkedColor:String},A=Symbol($);var Y=h({name:$,props:X,emits:["change","update:modelValue"],setup(e,{emit:d,slots:n}){const{linkChildren:t}=C(A),u=i=>d("update:modelValue",i);return B(()=>e.modelValue,i=>d("change",i)),t({props:e,updateValue:u}),S(()=>e.modelValue),()=>{var i;return l("div",{class:W([e.direction]),role:"radiogroup"},[(i=n.default)==null?void 0:i.call(n)])}}});const Z=v(Y),ee=T({},J,{shape:String}),[te,ae]=b("radio");var de=h({name:te,props:ee,emits:["update:modelValue"],setup(e,{emit:d,slots:n}){const{parent:t}=w(A),u=()=>(t?t.props.modelValue:e.modelValue)===e.name,i=()=>{t?t.updateValue(e.name):d("update:modelValue",e.name)};return()=>l(K,L({bem:ae,role:"radio",parent:t,checked:u(),onToggle:i},e),D(n,["default","icon"]))}});const se=v(de),[ne,m]=b("address-item");var oe=h({name:ne,props:{address:E(Object),disabled:Boolean,switchable:Boolean,defaultTagText:String,rightIcon:y("edit")},emits:["edit","click","select"],setup(e,{slots:d,emit:n}){const t=()=>{e.switchable&&n("select"),n("click")},u=()=>l(N,{name:e.rightIcon,class:m("edit"),onClick:s=>{s.stopPropagation(),n("edit"),n("click")}},null),i=()=>{if(d.tag)return d.tag(e.address);if(e.address.isDefault&&e.defaultTagText)return l(H,{type:"primary",round:!0,class:m("tag")},{default:()=>[e.defaultTagText]})},o=()=>{const{address:s,disabled:r,switchable:c}=e,a=[l("div",{class:m("name")},[`${s.name} ${s.tel}`,i()]),l("div",{class:m("address")},[s.address])];return c&&!r?l(se,{name:s.id,iconSize:18},{default:()=>[a]}):a};return()=>{var s;const{disabled:r}=e;return l("div",{class:m({disabled:r}),onClick:t},[l(O,{border:!1,titleClass:m("title")},{title:o,"right-icon":u}),(s=d.bottom)==null?void 0:s.call(d,T({},e.address,{disabled:r}))])}}});const[re,g,le]=b("address-list"),ie={list:_(),modelValue:I,switchable:V,disabledText:String,disabledList:_(),showAddButton:V,addButtonText:String,defaultTagText:String,rightIcon:y("edit")};var ce=h({name:re,props:ie,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(e,{slots:d,emit:n}){const t=(o,s,r)=>{const c=()=>n(r?"editDisabled":"edit",o,s),a=()=>n("clickItem",o,s),f=()=>{n(r?"selectDisabled":"select",o,s),r||n("update:modelValue",o.id)};return l(oe,{key:o.id,address:o,disabled:r,switchable:e.switchable,defaultTagText:e.defaultTagText,rightIcon:e.rightIcon,onEdit:c,onClick:a,onSelect:f},{bottom:d["item-bottom"],tag:d.tag})},u=(o,s)=>{if(o)return o.map((r,c)=>t(r,c,s))},i=()=>e.showAddButton?l("div",{class:[g("bottom"),"van-safe-area-bottom"]},[l(U,{round:!0,block:!0,type:"primary",text:e.addButtonText||le("add"),class:g("add"),onClick:()=>n("add")},null)]):void 0;return()=>{var o,s;const r=u(e.list),c=u(e.disabledList,!0),a=e.disabledText&&l("div",{class:g("disabled-text")},[e.disabledText]);return l("div",{class:g()},[(o=d.top)==null?void 0:o.call(d),l(Z,{modelValue:e.modelValue},{default:()=>[r]}),a,c,(s=d.default)==null?void 0:s.call(d),i()])}}});const ue=v(ce);const me={class:"address-box"},fe={class:"address-item"},xe={__name:"Address",setup(e){var r;const d=R(),n=q(),t=G({chosenAddressId:"1",list:[],from:((r=d==null?void 0:d.query)==null?void 0:r.from)??""});j(()=>{u()});const u=async()=>{const{data:c}=await Q();if(!c){t.list=[];return}t.list=c.map(a=>({id:a.addressId,name:a.userName,tel:a.userPhone,address:`${a.provinceName} ${a.cityName} ${a.regionName} ${a.detailAddress}`,isDefault:!!a.defaultFlag}))},i=()=>{n.push({path:"address-edit",query:{type:"add",from:t.from}})},o=c=>{n.push({path:"address-edit",query:{type:"edit",addressId:c.id,from:t.from}})},s=(c,a)=>{n.push({path:"create-order",query:{addressId:c.id,from:t.from}})};return(c,a)=>{const f=ue;return k(),z("div",me,[l(M,{name:"地址管理",back:t.from=="create-order"?"":"/user"},null,8,["back"]),F("div",fe,[t.from!="mine"?(k(),x(f,{key:0,modelValue:t.chosenAddressId,"onUpdate:modelValue":a[0]||(a[0]=p=>t.chosenAddressId=p),list:t.list,"default-tag-text":"默认",onAdd:i,onEdit:o,onSelect:s},null,8,["modelValue","list"])):(k(),x(f,{key:1,modelValue:t.chosenAddressId,"onUpdate:modelValue":a[1]||(a[1]=p=>t.chosenAddressId=p),list:t.list,"default-tag-text":"默认",onAdd:i,onEdit:o},null,8,["modelValue","list"]))])])}}};export{xe as default};
