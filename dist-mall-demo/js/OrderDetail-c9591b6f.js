import{B as j,C as O,b0 as G,D as J,E as Q,$ as X,a1 as A,b1 as Y,G as Z,r as ee,a as U,b2 as te,e as l,J as V,a3 as oe,a5 as ne,aq as M,b3 as H,b4 as ae,b5 as le,b6 as se,ad as re,aH as ce,b7 as ie,b8 as de,L as ue,_ as me,j as fe,o as he,q as ge,x as be,b,c as R,d as a,t as S,Q as x,w as _,A as I,F as _e,l as Be,g as L,h as C,p as we,i as Ce}from"./index-b6baaa43.js";import{C as ye}from"./index-7844f29f.js";import"./index-f7c480a6.js";import{B as E}from"./index-c2ffc462.js";import{s as pe}from"./SimpleHeader-eb02e727.js";import{a as ve,b as ke,d as Se,p as xe}from"./order-7deb7202.js";import{b as $,a as Pe}from"./index-3bdf2bbf.js";import"./use-route-29860e60.js";import"./use-placeholder-eae2f82f.js";const[Oe,i,P]=j("dialog"),Te=O({},G,{title:String,theme:String,width:J,message:[String,Function],callback:Function,allowHtml:Boolean,className:Q,transition:X("van-dialog-bounce"),messageAlign:String,closeOnPopstate:A,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:A,closeOnClickOverlay:Boolean}),De=[...Y,"transition","closeOnPopstate"];var q=Z({name:Oe,props:Te,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:u,slots:t}){const d=ee(),m=U({confirm:!1,cancel:!1}),p=o=>u("update:show",o),v=o=>{var c;p(!1),(c=e.callback)==null||c.call(e,o)},B=o=>()=>{e.show&&(u(o),e.beforeClose?(m[o]=!0,re(e.beforeClose,{args:[o],done(){v(o),m[o]=!1},canceled(){m[o]=!1}})):v(o))},w=B("cancel"),s=B("confirm"),n=te(o=>{var c,f;if(o.target!==((f=(c=d.value)==null?void 0:c.popupRef)==null?void 0:f.value))return;({Enter:e.showConfirmButton?s:H,Escape:e.showCancelButton?w:H})[o.key](),u("keydown",o)},["enter","esc"]),g=()=>{const o=t.title?t.title():e.title;if(o)return l("div",{class:i("header",{isolated:!e.message&&!t.default})},[o])},T=o=>{const{message:c,allowHtml:f,messageAlign:h}=e,k=i("message",{"has-title":o,[h]:h}),N=ae(c)?c():c;return f&&typeof N=="string"?l("div",{class:k,innerHTML:N},null):l("div",{class:k},[N])},D=()=>{if(t.default)return l("div",{class:i("content")},[t.default()]);const{title:o,message:c,allowHtml:f}=e;if(c){const h=!!(o||t.title);return l("div",{key:f?1:0,class:i("content",{isolated:!h})},[T(h)])}},r=()=>l("div",{class:[se,i("footer")]},[e.showCancelButton&&l(E,{size:"large",text:e.cancelButtonText||P("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:w},null),e.showConfirmButton&&l(E,{size:"large",text:e.confirmButtonText||P("confirm"),class:[i("confirm"),{[le]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:s},null)]),z=()=>l(Pe,{class:i("footer")},{default:()=>[e.showCancelButton&&l($,{type:"warning",text:e.cancelButtonText||P("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:w},null),e.showConfirmButton&&l($,{type:"danger",text:e.confirmButtonText||P("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:s},null)]}),W=()=>t.footer?t.footer():e.theme==="round-button"?z():r();return()=>{const{width:o,title:c,theme:f,message:h,className:k}=e;return l(M,V({ref:d,role:"dialog",class:[i([f]),k],style:{width:ne(o)},tabindex:0,"aria-labelledby":c||h,onKeydown:n,"onUpdate:show":p},oe(e,De)),{default:()=>[g(),D(),W()]})}}});let F;const Ne={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Ie=O({},Ne);function Ee(){({instance:F}=ie({setup(){const{state:u,toggle:t}=de();return()=>l(q,V(u,{"onUpdate:show":t}),null)}}))}function Fe(e){return ce?new Promise((u,t)=>{F||Ee(),F.open(O({},Ie,e,{callback:d=>{(d==="confirm"?u:t)(d)}}))}):Promise.resolve(void 0)}const K=e=>Fe(O({showCancelButton:!0},e));ue(q);const y=e=>(we("data-v-a17e6cec"),e=e(),Ce(),e),Ae={class:"order-detail-box"},He={class:"order-status"},Re={class:"status-item"},Le=y(()=>a("label",null,"订单状态：",-1)),$e={class:"status-item"},Ke=y(()=>a("label",null,"订单编号：",-1)),Ue={class:"status-item"},Ve=y(()=>a("label",null,"下单时间：",-1)),Me={class:"order-price"},qe={class:"price-item"},ze=y(()=>a("label",null,"商品金额：",-1)),We=y(()=>a("div",{class:"price-item"},[a("label",null,"配送方式："),a("span",null,"普通快递")],-1)),je={style:{width:"90%",margin:"0 auto",padding:"20px 0"}},Ge={__name:"OrderDetail",setup(e){const u=fe(),t=U({detail:{},showPay:!1});he(()=>{d()});const d=async()=>{ge({message:"加载中...",forbidClick:!0});const{id:s}=u.query,{data:n}=await ve(s);t.detail=n,be()},m=s=>{K({title:"确认取消订单？"}).then(()=>{ke(s).then(n=>{n.resultCode==200&&(L("删除成功"),d())})}).catch(()=>{})},p=s=>{K({title:"是否确认订单？"}).then(()=>{Se(s).then(n=>{n.resultCode==200&&(L("确认成功"),d())})}).catch(()=>{})},v=()=>{t.showPay=!0},B=async(s,n)=>{await xe({orderNo:s,payType:n}),t.showPay=!1,d()},w=()=>{};return(s,n)=>{const g=E,T=ye,D=M;return b(),R("div",Ae,[l(pe,{name:"订单详情",onCallback:w}),a("div",He,[a("div",Re,[Le,a("span",null,S(t.detail.orderStatusString),1)]),a("div",$e,[Ke,a("span",null,S(t.detail.orderNo),1)]),a("div",Ue,[Ve,a("span",null,S(t.detail.createTime),1)]),t.detail.orderStatus==3?(b(),x(g,{key:0,style:{"margin-bottom":"10px"},color:"#1baeae",block:"",onClick:n[0]||(n[0]=r=>p(t.detail.orderNo))},{default:_(()=>[C("确认收货")]),_:1})):I("",!0),t.detail.orderStatus==0?(b(),x(g,{key:1,style:{"margin-bottom":"10px"},color:"#1baeae",block:"",onClick:v},{default:_(()=>[C("去支付")]),_:1})):I("",!0),t.detail.orderStatus<0||t.detail.orderStatus==4?I("",!0):(b(),x(g,{key:2,block:"",onClick:n[1]||(n[1]=r=>m(t.detail.orderNo))},{default:_(()=>[C("取消订单")]),_:1}))]),a("div",Me,[a("div",qe,[ze,a("span",null,"¥ "+S(t.detail.totalPrice),1)]),We]),(b(!0),R(_e,null,Be(t.detail.newBeeMallOrderItemVOS,r=>(b(),x(T,{key:r.goodsId,style:{background:"#fff"},num:r.goodsCount,price:r.sellingPrice,desc:"全场包邮",title:r.goodsName,thumb:s.$filters.prefix(r.goodsCoverImg)},null,8,["num","price","title","thumb"]))),128)),l(D,{show:t.showPay,"onUpdate:show":n[4]||(n[4]=r=>t.showPay=r),position:"bottom",style:{height:"24%"}},{default:_(()=>[a("div",je,[l(g,{style:{marginBottom:"10px"},color:"#1989fa",block:"",onClick:n[2]||(n[2]=r=>B(t.detail.orderNo,1))},{default:_(()=>[C("支付宝支付")]),_:1}),l(g,{color:"#4fc08d",block:"",onClick:n[3]||(n[3]=r=>B(t.detail.orderNo,2))},{default:_(()=>[C("微信支付")]),_:1})])]),_:1},8,["show"])])}}},at=me(Ge,[["__scopeId","data-v-a17e6cec"]]);export{at as default};
