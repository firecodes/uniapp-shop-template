import{a as Q,b as X,R as Y,P as ee,c as oe,h as T}from"./index-03307fbd.js";import{S as te}from"./SvgIcon-1fd0a40c.js";import{j as I,q as b,s as $,t as f,E as o,$ as se,u as e,r as x,c as k,a as G,e as le,V as S,W as t,M as V,Z as N,a0 as ne,a1 as re}from"./@vue-0377b646.js";import{c as ae,d as ue,s as ie,F as W,S as me,B as z,e as M,f as de,g as ce}from"./vant-7bd86a8c.js";import{b as pe,u as _e}from"./vue-router-364552f7.js";import{I as p,U as D,L as U,E as B,a as O,M as Z,b as H}from"./@vicons-a0e492aa.js";import{_ as J}from"./plugin-vueexport-helper-c27b6911.js";/* empty css                */import"./pinia-c96fbc4a.js";import"./pinia-plugin-persist-4bd0ee57.js";import"./vue-i18n-1caedbd2.js";import"./@intlify-9d27331d.js";import"./axios-a342f982.js";import"./qs-3adf1c80.js";import"./call-bind-0362a3f2.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./side-channel-27cf7d8c.js";import"./object-inspect-46f86162.js";import"./lodash-es-4d284b0e.js";import"./mockjs-5811d250.js";import"./vite-plugin-mock-3c140df3.js";import"./path-to-regexp-31db6522.js";import"./@vant-58ad0652.js";import"./@xicons-08a530b2.js";import"./css-render-bba99c0e.js";import"./@emotion-8a8e73f6.js";const fe={class:"flex flex-col items-center justify-center"},ve={class:"logo enter-y mb-2 mt-8"},ye={class:"text-darkBlue dark:text-garyWhite enter-y mb-8 text-2xl font-black"},ge=I({__name:"LoginTitle",setup(s){const r=Q(),{title:y}=r;return(v,h)=>(b(),$("div",fe,[f("div",ve,[o(te,{class:"!h-30 !w-30",name:"logo"})]),f("div",ye,se(e(y)),1)]))}});var F=(s=>(s[s.LOGIN=0]="LOGIN",s[s.REGISTER=1]="REGISTER",s[s.RESET_PASSWORD=2]="RESET_PASSWORD",s))(F||{});const A=x(0);function j(){function s(v){A.value=v}const r=k(()=>A.value);function y(){s(0)}return{setLoginState:s,getLoginState:r,handleBackLogin:y}}function q(s){const r=k(()=>C("请输入用户名")),y=k(()=>C("请输入密码")),v=k(()=>C("请输入短信验证码")),h=k(()=>C("请输入手机号码")),w=async(a,u)=>a?Promise.resolve(!0):Promise.resolve("勾选后才能注册"),n=a=>async u=>u?u!==a?Promise.resolve("两次输入密码不一致"):Promise.resolve(!0):Promise.resolve("请输入确认密码");return{getFormRules:k(()=>{const a=e(r),u=e(y),_=e(v),c=e(h),l={sms:_,mobile:c};switch(e(A)){case 1:return{username:a,password:u,confirmPassword:[{validator:n(s==null?void 0:s.password),trigger:"onChange"}],policy:[{validator:w,trigger:"onBlur"}],...l};case 2:return{username:a,...l};default:return{username:a,password:u}}})}}function C(s){return[{required:!0,message:s,trigger:"onBlur"}]}const be={class:"enter-y mb-10 w-full flex justify-between px-5px"},we={class:"flex items-center"},xe=f("span",null,"记住我",-1),he=I({__name:"LoginForm",setup(s){const{setLoginState:r,getLoginState:y}=j(),{getFormRules:v}=q(),h=X(),w=pe(),n=_e(),m=x(),a=x(!1),u=x(!1),_=x(!0),c=G({username:"admin",password:"123456"}),l=k(()=>e(y)===F.LOGIN);function R(){var g;(g=m.value)==null||g.validate().then(async()=>{var d;try{a.value=!0,ae("登录中...");const{code:E,message:L}=await h.Login({username:c.username,password:c.password});if(E===Y.SUCCESS){const i=decodeURIComponent(((d=n.query)==null?void 0:d.redirect)||"/");ue("登录成功，即将进入系统"),n.name===ee.BASE_LOGIN_NAME?w.replace("/"):w.replace(i)}else ie(L||"登录失败")}finally{a.value=!1}}).catch(()=>{console.error("验证失败")})}return le(()=>{}),(g,d)=>{const E=W,L=me,i=z,K=M;return l.value?(b(),S(K,{key:0,ref_key:"formRef",ref:m,class:"flex flex-col items-center",onSubmit:R},{default:t(()=>[o(E,{modelValue:c.username,"onUpdate:modelValue":d[0]||(d[0]=P=>c.username=P),class:"enter-y mb-4 items-center !rounded-md",name:"username",placeholder:"用户名",rules:e(v).username},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(D))]),_:1})]),_:1},8,["modelValue","rules"]),o(E,{modelValue:c.password,"onUpdate:modelValue":d[1]||(d[1]=P=>c.password=P),class:"enter-y mb-4 items-center !rounded-md",type:_.value?"password":"text",name:"password",placeholder:"密码",rules:e(v).password,onClickRightIcon:d[2]||(d[2]=P=>_.value=!_.value)},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(U))]),_:1})]),"right-icon":t(()=>[_.value?(b(),S(e(p),{key:0},{default:t(()=>[o(e(B))]),_:1})):(b(),S(e(p),{key:1},{default:t(()=>[o(e(O))]),_:1}))]),_:1},8,["modelValue","type","rules"]),f("div",be,[f("div",we,[o(L,{modelValue:u.value,"onUpdate:modelValue":d[3]||(d[3]=P=>u.value=P),size:"18px",class:"mr-8px"},null,8,["modelValue"]),xe]),f("a",{onClick:d[4]||(d[4]=P=>e(r)(e(F).RESET_PASSWORD))},"忘记密码?")]),o(i,{class:"enter-y !mb-4 !rounded-md",type:"primary",block:"","native-type":"submit",loading:a.value},{default:t(()=>[V(" 登 录 ")]),_:1},8,["loading"]),o(i,{class:"enter-y !rounded-md",plain:"",type:"primary",block:"",onClick:d[5]||(d[5]=P=>e(r)(e(F).REGISTER))},{default:t(()=>[V(" 注 册 ")]),_:1})]),_:1},512)):N("",!0)}}}),Re=I({__name:"ForgetPasswordForm",setup(s){const{handleBackLogin:r,getLoginState:y}=j(),{getFormRules:v}=q(),h=k(()=>e(y)===F.RESET_PASSWORD),w=x(!1),n=x(),m=G({username:"",mobile:"",sms:""});function a(){var u;(u=n.value)==null||u.validate().then(async()=>{try{w.value=!0}finally{w.value=!1}}).catch(()=>{console.error("验证失败")})}return(u,_)=>{const c=W,l=z,R=M;return h.value?(b(),S(R,{key:0,ref_key:"formRef",ref:n,class:"flex flex-col items-center",onSubmit:a},{default:t(()=>[o(c,{modelValue:m.username,"onUpdate:modelValue":_[0]||(_[0]=g=>m.username=g),class:"enter-y mb-4 items-center !rounded-md",name:"username",placeholder:"用户名",rules:e(v).username},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(D))]),_:1})]),_:1},8,["modelValue","rules"]),o(c,{modelValue:m.mobile,"onUpdate:modelValue":_[1]||(_[1]=g=>m.mobile=g),class:"enter-y mb-4 items-center !rounded-md",name:"password",placeholder:"手机号码",rules:e(v).mobile},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(Z))]),_:1})]),_:1},8,["modelValue","rules"]),o(c,{modelValue:m.sms,"onUpdate:modelValue":_[2]||(_[2]=g=>m.sms=g),class:"enter-y mb-10 items-center !rounded-md",center:"",clearable:"",placeholder:"请输入短信验证码",rules:e(v).sms},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(H))]),_:1})]),button:t(()=>[o(l,{size:"small",type:"primary"},{default:t(()=>[V(" 发送验证码 ")]),_:1})]),_:1},8,["modelValue","rules"]),o(l,{class:"enter-y !mb-4 !rounded-md",type:"primary",block:"","native-type":"submit",loading:w.value},{default:t(()=>[V(" 重 置 ")]),_:1},8,["loading"]),o(l,{class:"enter-y !rounded-md",plain:"",type:"primary",block:"",onClick:e(r)},{default:t(()=>[V(" 返 回 ")]),_:1},8,["onClick"])]),_:1},512)):N("",!0)}}}),ke=I({__name:"RegisterForm",setup(s){const{handleBackLogin:r,getLoginState:y}=j(),v=k(()=>e(y)===F.REGISTER),h=x(!1),w=x(),n=G({username:"",mobile:"",sms:"",password:"",confirmPassword:"",policy:!1}),{getFormRules:m}=q(n),a=x(!0),u=x(!0);function _(){var c;(c=w.value)==null||c.validate().then(async()=>{try{h.value=!0,console.log("%c [  ]-167","font-size:13px; background:pink; color:#bf2c9f;")}finally{h.value=!1,console.log("%c [  ]-171","font-size:13px; background:pink; color:#bf2c9f;")}}).catch(()=>{console.error("验证失败")})}return(c,l)=>{const R=W,g=z,d=de,E=ce,L=M;return v.value?(b(),S(L,{key:0,ref_key:"formRef",ref:w,class:"flex flex-col",onSubmit:_},{default:t(()=>[o(E,{inset:"",class:"enter-y !mx-0 !mb-10"},{default:t(()=>[o(R,{modelValue:n.username,"onUpdate:modelValue":l[0]||(l[0]=i=>n.username=i),class:"enter-y items-center !rounded-md",name:"username",placeholder:"用户名",rules:e(m).username},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(D))]),_:1})]),_:1},8,["modelValue","rules"]),o(R,{modelValue:n.mobile,"onUpdate:modelValue":l[1]||(l[1]=i=>n.mobile=i),class:"enter-y items-center !rounded-md",name:"password",placeholder:"手机号码",rules:e(m).mobile},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(Z))]),_:1})]),_:1},8,["modelValue","rules"]),o(R,{modelValue:n.sms,"onUpdate:modelValue":l[2]||(l[2]=i=>n.sms=i),class:"enter-y items-center !rounded-md",center:"",clearable:"",placeholder:"请输入短信验证码",rules:e(m).sms},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(H))]),_:1})]),button:t(()=>[o(g,{size:"small",type:"primary"},{default:t(()=>[V(" 发送验证码 ")]),_:1})]),_:1},8,["modelValue","rules"]),o(R,{modelValue:n.password,"onUpdate:modelValue":l[3]||(l[3]=i=>n.password=i),class:"enter-y items-center !rounded-md",type:a.value?"password":"text",name:"password",placeholder:"密码",rules:e(m).password,onClickRightIcon:l[4]||(l[4]=i=>a.value=!a.value)},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(U))]),_:1})]),"right-icon":t(()=>[a.value?(b(),S(e(p),{key:0},{default:t(()=>[o(e(B))]),_:1})):(b(),S(e(p),{key:1},{default:t(()=>[o(e(O))]),_:1}))]),_:1},8,["modelValue","type","rules"]),o(R,{modelValue:n.confirmPassword,"onUpdate:modelValue":l[5]||(l[5]=i=>n.confirmPassword=i),class:"enter-y items-center !rounded-md",type:u.value?"password":"text",name:"confirmPassword",placeholder:"确认密码",rules:e(m).confirmPassword,onClickRightIcon:l[6]||(l[6]=i=>u.value=!u.value)},{"left-icon":t(()=>[o(e(p),null,{default:t(()=>[o(e(U))]),_:1})]),"right-icon":t(()=>[u.value?(b(),S(e(p),{key:0},{default:t(()=>[o(e(B))]),_:1})):(b(),S(e(p),{key:1},{default:t(()=>[o(e(O))]),_:1}))]),_:1},8,["modelValue","type","rules"]),o(R,{name:"policy",class:"enter-y items-center px-1 !rounded-md",rules:e(m).policy},{input:t(()=>[o(d,{modelValue:n.policy,"onUpdate:modelValue":l[7]||(l[7]=i=>n.policy=i),"icon-size":"14px",shape:"square"},{default:t(()=>[V(" 我同意 xxx 隐私政策 ")]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1}),o(g,{class:"enter-y !mb-4 !rounded-md",type:"primary",block:"","native-type":"submit",loading:h.value},{default:t(()=>[V(" 注 册 ")]),_:1},8,["loading"]),o(g,{class:"enter-y !rounded-md",plain:"",type:"primary",block:"",onClick:e(r)},{default:t(()=>[V(" 返 回 ")]),_:1},8,["onClick"])]),_:1},512)):N("",!0)}}}),Se=s=>(ne("data-v-c363e6bd"),s=s(),re(),s),Ve={class:"enter-y wave-wrapper fixed bottom-0 w-full !-z-5"},Pe={class:"ignore-waves",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none","shape-rendering":"auto"},Ee=Se(()=>f("defs",null,[f("path",{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})],-1)),Fe={class:"parallax"},Ie=["fill"],Le=["fill"],Te=["fill"],Ce=["fill"],$e=I({__name:"LoginWave",setup(s){const r=oe();return(y,v)=>(b(),$("div",Ve,[(b(),$("svg",Pe,[Ee,f("g",Fe,[f("use",{"xlink:href":"#gentle-wave",x:"48",y:"0",fill:e(T)(e(r).getAppTheme,.4)},null,8,Ie),f("use",{"xlink:href":"#gentle-wave",x:"48",y:"3",fill:e(T)(e(r).getAppTheme,.5)},null,8,Le),f("use",{"xlink:href":"#gentle-wave",x:"48",y:"5",fill:e(T)(e(r).getAppTheme,.6)},null,8,Te),f("use",{"xlink:href":"#gentle-wave",x:"48",y:"7",fill:e(T)(e(r).getAppTheme,.7)},null,8,Ce)])]))]))}});const Ue=J($e,[["__scopeId","data-v-c363e6bd"]]),Be={class:"h-screen flex justify-center p-8"},Oe={class:"w-full flex flex-col"},Ae=I({__name:"Login",setup(s){return(r,y)=>(b(),$("div",null,[f("div",Be,[f("div",Oe,[o(ge),o(he),o(Re),o(ke)])]),o(Ue)]))}});const ho=J(Ae,[["__scopeId","data-v-1fa0bca9"]]);export{ho as default};
