import{d as z,r as i,o as V,q as B,b as D,c as o,e as v,w as n,f as d,g as h,h as m,u as p,F as g,D as N,j as q,m as F,A as j,i as k,t as x,C as A,n as H,l as Q,k as U}from"./index.1709508483504.js";import{s as G}from"./request.B93Mmejw.js";import{_ as J}from"./plugin-vueexport-helper.DlAUqK2U.js";function K(C){return G({url:"/mall-pms/app-api/v1/categories",method:"get",params:{parentId:C}})}const M=z({__name:"category",setup(C){const y=i(!1),w=i(0),u=i(0),_=i([]),c=i([]),I=i([]),$=()=>{K().then(t=>{t.data.forEach(e=>{_.value.push(e),e.children&&e.children.forEach(a=>{c.value.push(a),a.children&&a.children.forEach(f=>{I.value.push(f)})})}),_.value.sort(function(e,a){return e.id-a.id}),c.value.sort(function(e,a){return e.parentId==a.parentId?e.id-a.id:e.parentId-a.parentId}),I.value.sort(function(e,a){return e.parentId==a.parentId?e.id-a.id:e.parentId-a.parentId}),u.value=_.value[0].id})},L=t=>{y.value||S(),u.value=t.id;let s=c.value.findIndex(e=>e.parentId==t.id);w.value=c.value[s].top},T=t=>{y.value||S();let s=t.detail.scrollTop,e=c.value.filter(a=>a.top<=s).reverse();e.length>0&&(u.value=e[0].parentId)},S=()=>{let t=0;c.value.forEach(s=>{N().select("#main-"+s.id).fields({size:!0},a=>{s.top=t,t+=a.height,s.bottom=t}).exec()}),y.value=!0},E=(t,s)=>{H({url:`/pages/product/list?fid=${u.value}&sid=${t}&tid=${s}`})};return V(()=>{}),B(()=>{$()}),D(()=>{}),(t,s)=>{const e=q,a=F,f=Q,b=U;return o(),v(e,{class:"content"},{default:n(()=>[d(a,{"scroll-y":"",class:"left-aside _u_scroll-y"},{default:n(()=>[(o(!0),h(g,null,m(p(_),l=>(o(),v(e,{key:l.id,class:j(["f-item b-b",{active:l.id==p(u)}]),onClick:r=>L(l)},{default:n(()=>[k(x(l.name),1)]),_:2},1032,["class","onClick"]))),128))]),_:1}),d(a,{"scroll-with-animation":"","scroll-y":"",class:"right-aside _u_scroll-with-animation _u_scroll-y",onScroll:T,"scroll-top":p(w)},{default:n(()=>[(o(!0),h(g,null,m(p(c),l=>(o(),v(e,{key:l.id,class:"s-list",id:"main-"+l.id},{default:n(()=>[d(f,{class:"s-item"},{default:n(()=>[k(x(l.name),1)]),_:2},1024),d(e,{class:"t-list"},{default:n(()=>[(o(!0),h(g,null,m(p(I),r=>(o(),h(g,{key:r.id},[(r==null?void 0:r.parentId)===(l==null?void 0:l.id)?(o(),v(e,{key:0,onClick:O=>E(l.id,r.id),class:"t-item"},{default:n(()=>[d(b,{src:r.iconUrl},null,8,["src"]),d(f,null,{default:n(()=>[k(x(r.name),1)]),_:2},1024)]),_:2},1032,["onClick"])):A("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1},8,["scroll-top"])]),_:1})}}}),X=J(M,[["__scopeId","data-v-4ab1d95c"]]);export{X as default};
